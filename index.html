<!DOCTYPE html>
<!--Cache-->
<html manifest="cache.appcache">

  <head>
    <meta charset="utf-8">
    <!--Viewport 4 responsive design-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Favicon 16x16-->
    <link rel="icon" type="img/png" href="./img/favicon.ico">
    <!--CSS-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <!--JS (defer: download while parsing, executed after parsing)-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js" defer></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/js/bootstrap-select.min.js" defer></script>
    <title>FH-Timetable</title>
  </head>

    <body onload="startTime(); getDate()">
      <!--Wrapper aka bootstrap-container-->
      <div id="wrapper" class="container">

      <img id="fh_pic" class="img-responsive" src="./img/fh_pic.png" alt="FH Logo">

      <!--All drop-downs (course of studies, year, view) + time/date-->
      <div id="dropdown_container" class="row">
        <div id="all_dropdowns" class="row">

          <div id="date_time_container">
            <div id="time"></div>
            <div id="date"></div>
          </div>

          <div id="studiengang" class="col-md-4">
            <!--Included a live search option / data-tokens are the search patterns-->
            <!--https://silviomoreto.github.io/bootstrap-select/-->
            <select id="course" class="selectpicker" data-live-search="true" data-style="btn-info">
                  <!--Default-->
                  <option value="" disabled selected style="display: none;">Select course of studies!</option>
                <optgroup label="Angewandte Informatik" data-max-options="2">
                  <option data-tokens="ITM Internettechnik">ITM</option>
                  <option data-tokens="IMA Informationsmanagement">IMA</option>
                  <option data-tokens="GEB Gesundheitsinformatik eHealth">GEB</option>
                  <option data-tokens="SWD Software Design">SWD</option>
                  <option data-tokens="IT Mobile Security">IMS</option>
                  <option data-tokens="eHealth">EHT</option>
                  <option data-tokens="Informationsmanagement">AIM</option>
                  <option data-tokens="IT-Recht Management">IRM</option>
                </optgroup>
                <optgroup label="Engineering">
                  <option data-tokens="ECE Elektronik Computer Engineering">ECE</option>
                  <option data-tokens="FZT Fahrzeugtechnik Automotive Engineering">FZT</option>
                  <option data-tokens="PTO Produktionstechnik Organisation">PTO</option>
                  <option data-tokens="LAV Luftfahrt Aviation">LAV</option>
                  <option data-tokens="LEB Nachhaltiges Lebensmittelmanagement">LEB</option>
                  <option data-tokens="Advanced Electronic Engneering">AEE</option>
                  <option data-tokens="Engineering and Product Management">ENP</option>
                  <option data-tokens="Luftfahrt Aviation">MAV</option>
                  <option data-tokens="Fahrzeugtechnik Automotive Engineering">MAE</option>
                </optgroup>
                <optgroup label="Gesundheitsstudien">
                  <option data-tokens="BIO Biomedizinische Analytik">BIO</option>
                  <option data-tokens="DIO Diätologie">DIO</option>
                  <option data-tokens="ERG Ergotherapie">ERG</option>
                  <option data-tokens="HEB Hebammen">HEB</option>
                  <option data-tokens="LOG Logopädie">LOG</option>
                  <option data-tokens="PTH Physiotherapie">PTH</option>
                  <option data-tokens="RAD Radiologietechnologie">RAD</option>
                  <option data-tokens="Massenspektrometrie Molekulare Analytik">MMA</option>
                </optgroup>
                <optgroup label="Bauen, Energie und Gesellschaft">
                  <option data-tokens="BBW Bauplanung Bauwirtschaft">BBW</option>
                  <option data-tokens="EVU Energie-, Verkehrs- Umweltmanagement">EVU</option>
                  <option data-tokens="SAM Soziale Arbeit">SAM</option>
                  <option data-tokens="Architektur">ARC</option>
                  <option data-tokens="Bauplanung Ingenieurbau">BMI</option>
                  <option data-tokens="Energy and Transport Management">MET</option>
                  <option data-tokens="Soziale Arbeit">SOA</option>
                </optgroup>
                <optgroup label="Medien und Design">
                  <option data-tokens="IDB Industrial Design">IDB</option>
                  <option data-tokens="IND Informationsdesign">IND</option>
                  <option data-tokens="JPR Journalismus Public Relations (PR)">JPR</option>
                  <option data-tokens="Ausstellungsdesign">AUD</option>
                  <option data-tokens="
  Communication Design; Interaction Design; Media Design; Sound Design">CMS</option>
                  <option data-tokens="Industrial Design">IDM</option>
                  <option data-tokens="Content-Strategie Content Strategy">COS</option>
                </optgroup>
                <optgroup label="Management">
                  <option data-tokens="BVW Bank- Versicherungswirtschaft">BVW</option>
                  <option data-tokens="GMT Gesundheitsmanagement Tourismus">GMT</option>
                  <option data-tokens="IWI Industriewirtschaft Industrial Management">IWI</option>
                  <option data-tokens="MIG Management internationaler Geschäftsprozesse">MIG</option>
                  <option data-tokens="Bank- und Versicherungsmanagement">BVM</option>
                  <option data-tokens="Business in Emerging Markets">MEM</option>
                  <option data-tokens="Gesundheitsmanagement im Tourismus">GTM</option>
                  <option data-tokens="International Industrial Management">IIM</option>
                </optgroup>
            </select>
          </div>

          <div id="jahrgang" class="col-md-4">
            <select id="year" class="selectpicker" data-live-search="true" data-style="btn-info">
              <option value="" disabled selected style="display: none;">Select year!</option>
              <option data-tokens="2016">2016</option>
              <option data-tokens="2015">2015</option>
              <option data-tokens="2014">2014</option>
              <option data-tokens="2013">2013</option>
              <option data-tokens="2012">2012</option>
            </select>
          </div>

          <div id="ansicht" class="col-md-4">
            <select id="view" class="selectpicker" data-style="btn-info">
              <option value="" disabled selected style="display: none;">Select view!</option>
              <option>Month</option>
              <option>Week</option>
              <option>Day</option>
            </select>
          </div>
      </div>
    </div>

      <!--All buttons-->
      <div id="btn_container" class="row">
        <div id="all_buttons" class="row">
          <div class="col-md-4">
          </div>
          <div id="result_container" class="col-md-4">
              <a id="link"><button id="resultbtn" type="button" class="btn btn-success" name="submit">show timetable!</button></a>
          </div>
          <div class="col-md-4">
          </div>
          <!--<div id="reset_container" class="col-md-4">
                <button id="resetbtn" type="button" class="btn btn-warning" name="reset">reset!</button>
          </div>-->
        </div>
      </div>

      <footer>© Rudischer | Schaberreiter | Schweighofer</footer>

        <!--Perhabs we should write our own js-script and include it-->
        <script>
            //EventListener to remove onClick() on the buttons parameter, better solution
            var resultbtn = document.getElementById('resultbtn');
            resultbtn.addEventListener("click",showSchedule);

            //var resetbtn = document.getElementById('resetbtn');
            //resetbtn.addEventListener("click",resetSelect);

            //Function to create a link with the users selection (course, year, view)
            function showSchedule(){
                //http://www.w3schools.com/jsref/prop_select_selectedindex.asp
                var courses = document.getElementById('course').options;
                var course = document.getElementById('course').selectedIndex;
                var years = document.getElementById('year').options;
                var year = document.getElementById('year').selectedIndex;
                var views = document.getElementById('view').options;
                var view = document.getElementById('view').selectedIndex;

                //Test case
                if(courses[course].text == "Select course of studies!" && years[year].text == "Select year!" && views[view].text == "Select view!") {
                  alert("Please select a course of studies, a year and a view!");
                } else if(courses[course].text == "Select course of studies!" && years[year].text == "Select year!") {
                  alert("Please select a course of studies and a year!");
                }else if(courses[course].text == "Select course of studies!" && views[view].text == "Select view!") {
                  alert("Please select a course of studies and a view!");
                }else if(years[year].text == "Select year!" && views[view].text == "Select view!") {
                  alert("Please select a year and a view!");
                }else if(courses[course].text == "Select course of studies!") {
                  alert("Please select a course of studies");
                }else if(years[year].text == "Select year!") {
                  alert("Please select a year!");
                }else if(views[view].text == "Select view!") {
                  alert("Please select a view!");
                } else {
                document.getElementById('link').href = 'schedule.php?c='+courses[course].text+'&y='+years[year].text+'&view='+views[view].text;
                }
            }

            //its working after site refresh (cmnd+r) - but ill find a way to solve the problem! :)
            /*function resetSelect() {
              $('selectpicker').val("");
              $('selectpicker').selectpicker('render');
            }*/

            //Function to create a formatted time
            function startTime() {
                var today = new Date();
                var h = today.getHours();
                var m = today.getMinutes();
                var s = today.getSeconds();
                m = checkTime(m);
                s = checkTime(s);
                document.getElementById('time').innerHTML =
                h + ":" + m + ":" + s;
                var t = setTimeout(startTime, 500);
            }

            //Function to dd zero in front of numbers < 10
            function checkTime(i) {
                if (i < 10) {i = "0" + i};
                return i;
            }

            //Function to get the name of the day and the date itself
            function getDate() {
                var weekday = new Array(7);
                  weekday[0]=  "Sonntag";
                  weekday[1] = "Montag";
                  weekday[2] = "Dienstag";
                  weekday[3] = "Mittwoch";
                  weekday[4] = "Donnerstag";
                  weekday[5] = "Freitag";
                  weekday[6] = "Samstag";

                 var today = new Date();
                 var dd = today.getDate();
                 var mm = today.getMonth()+1; //January is 0!

                 var yyyy = today.getFullYear();

                 if(dd<10){
                     dd='0'+dd
                 }
                 if(mm<10){
                     mm='0'+mm
                 }
                 var today = weekday[today.getDay()]+", "+dd+'.'+mm+'.'+yyyy;
                 document.getElementById("date").innerHTML = today;
            }
        </script>
    </body>
  </div>
</html>
